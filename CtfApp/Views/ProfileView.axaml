<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:CtfApp.ViewModels"
             x:Class="CtfApp.Views.ProfileView"
             x:DataType="vm:ProfileViewModel"
             Background="#1e1e2e">

    <Border Padding="20" Background="#1e1e2e">
        <Grid RowDefinitions="Auto,*,Auto">
            
            <!-- HEADER -->
            <Border Grid.Row="0" Background="#181825" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Grid.Column="0" Spacing="10">
                        <TextBlock Text="PERSONAL PROFILE" Foreground="#a6e3a1" FontSize="24" FontWeight="Bold"/>
                        <TextBlock Text="{Binding Username}" Foreground="#89b4fa" FontSize="18"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Spacing="10" VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal" Spacing="20">
                            <StackPanel Spacing="5">
                                <TextBlock Text="Total Score" Foreground="#a6adc8" FontSize="12"/>
                                <TextBlock Text="{Binding TotalScore}" Foreground="#fab387" FontSize="20" FontWeight="Bold"/>
                            </StackPanel>
                            <StackPanel Spacing="5">
                                <TextBlock Text="Tasks Solved" Foreground="#a6adc8" FontSize="12"/>
                                <TextBlock Text="{Binding SolvedTasks}" Foreground="#a6e3a1" FontSize="20" FontWeight="Bold"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- SOLVED TASKS -->
            <ScrollViewer Grid.Row="1">
                <StackPanel Spacing="15" Margin="0,0,0,20">
                    <TextBlock Text="Completed Challenges" Foreground="#89b4fa" FontSize="18" FontWeight="Bold"/>
                    
                    <ItemsControl ItemsSource="{Binding SolvedTasksList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#313244" CornerRadius="8" Padding="15" BorderBrush="#45475a" BorderThickness="1">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0" Spacing="8">
                                            <TextBlock Text="{Binding Title}" FontSize="16" FontWeight="Bold" Foreground="#89b4fa"/>
                                            <TextBlock Text="{Binding Description}" Foreground="#a6adc8" TextWrapping="Wrap" FontSize="13"/>
                                        </StackPanel>
                                        <TextBlock Grid.Column="1" Text="{Binding Points, StringFormat='+{0} pts'}" 
                                                   Foreground="#a6e3a1" FontWeight="Bold" VerticalAlignment="Center" Margin="15,0,0,0"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>

            <!-- FOOTER BUTTONS -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Command="{Binding BackToDashboardCommand}" Content="BACK TO DASHBOARD" 
                        Background="#f38ba8" Foreground="#1e1e2e" FontWeight="Bold" 
                        Padding="15,10" CornerRadius="5"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
