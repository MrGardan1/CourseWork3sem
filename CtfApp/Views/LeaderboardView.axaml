<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:CtfApp.ViewModels"
             x:Class="CtfApp.Views.LeaderboardView"
             x:DataType="vm:LeaderboardViewModel"
             Background="#1e1e2e">

    <Border Padding="20" Background="#1e1e2e">
        <Grid RowDefinitions="Auto,*,Auto">
            
            <!-- HEADER -->
            <Border Grid.Row="0" Background="#181825" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                <StackPanel Spacing="10">
                    <TextBlock Text="ðŸ† LEADERBOARD" Foreground="#f9e2af" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock Text="Top users by score" Foreground="#a6adc8" FontSize="14" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- LEADERBOARD TABLE -->
            <ScrollViewer Grid.Row="1">
                <StackPanel Spacing="10" Margin="0,0,0,20">
                    
                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ -->
                    <Border Background="#313244" CornerRadius="8" Padding="15" BorderBrush="#45475a" BorderThickness="1">
                        <Grid ColumnDefinitions="60,*,120,120">
                            <TextBlock Grid.Column="0" Text="Rank" Foreground="#89b4fa" FontWeight="Bold" FontSize="13"/>
                            <TextBlock Grid.Column="1" Text="Username" Foreground="#89b4fa" FontWeight="Bold" FontSize="13"/>
                            <TextBlock Grid.Column="2" Text="Solved" Foreground="#89b4fa" FontWeight="Bold" FontSize="13" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="3" Text="Score" Foreground="#89b4fa" FontWeight="Bold" FontSize="13" HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>
                    
                    <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð² -->
                    <ItemsControl ItemsSource="{Binding Leaderboard}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border CornerRadius="8" Padding="15" Margin="0,0,0,5"
                                        Background="{Binding IsCurrentUser, Converter={StaticResource BoolToBackground}}"
                                        BorderBrush="#45475a" BorderThickness="1">
                                    <Grid ColumnDefinitions="60,*,120,120">
                                        
                                        <!-- ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ Ñ Ð¼ÐµÐ´Ð°Ð»ÑÐ¼Ð¸ -->
                                        <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                            <Border Background="{Binding PositionColor}" CornerRadius="15" Width="30" Height="30">
                                                <TextBlock Text="{Binding Position}" Foreground="#1e1e2e" FontWeight="Bold" 
                                                           HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="14"/>
                                            </Border>
                                            <TextBlock IsVisible="{Binding Position, Converter={StaticResource PositionToMedal}, ConverterParameter=1}" 
                                                       Text="ðŸ¥‡" FontSize="20" VerticalAlignment="Center"/>
                                            <TextBlock IsVisible="{Binding Position, Converter={StaticResource PositionToMedal}, ConverterParameter=2}" 
                                                       Text="ðŸ¥ˆ" FontSize="20" VerticalAlignment="Center"/>
                                            <TextBlock IsVisible="{Binding Position, Converter={StaticResource PositionToMedal}, ConverterParameter=3}" 
                                                       Text="ðŸ¥‰" FontSize="20" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        
                                        <!-- Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ -->
                                        <TextBlock Grid.Column="1" Text="{Binding Username}" Foreground="#cdd6f4" 
                                                   FontSize="16" FontWeight="{Binding IsCurrentUser, Converter={StaticResource BoolToFontWeight}}" 
                                                   VerticalAlignment="Center"/>
                                        
                                        <!-- Ð ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ -->
                                        <TextBlock Grid.Column="2" Text="{Binding SolvedTasks, StringFormat='{}{0} tasks'}" 
                                                   Foreground="#a6e3a1" FontSize="14" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        
                                        <!-- ÐžÑ‡ÐºÐ¸ -->
                                        <TextBlock Grid.Column="3" Text="{Binding Score, StringFormat='{}{0} pts'}" 
                                                   Foreground="#fab387" FontSize="16" FontWeight="Bold" 
                                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>

            <!-- FOOTER BUTTONS -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Command="{Binding BackToDashboardCommand}" Content="BACK TO DASHBOARD" 
                        Background="#f38ba8" Foreground="#1e1e2e" FontWeight="Bold" 
                        Padding="15,10" CornerRadius="5"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
